<%=javascript_include_tag "jquery.min" %>
<%=javascript_include_tag "springy" %>
<%=javascript_include_tag "springyui" %>

<table>
  <tbody>
    <tr>
      <td> Success scale - </td>
      <td style="color:<%=ApplicationController.helpers.gradient(0.0)%>">0% - </td>
      <td style="color:<%=ApplicationController.helpers.gradient(0.25)%>">25% - </td>
      <td style="color:<%=ApplicationController.helpers.gradient(0.50)%>">50% -</td>
      <td style="color:<%=ApplicationController.helpers.gradient(0.75)%>">75% - </td>
      <td style="color:<%=ApplicationController.helpers.gradient(1.0)%>">100% </td>
    </tr>
  </tbody>
</table>

<table class="table">
  <thead>
    <tr>
      <th>Meaning</th>
      <th>Example</th>
      <th>Pinyin</th>
      <th>More examples</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td id="eng"></td>
      <td id="example"></td>
      <td id="pinyin"></td>
      <td><%= link_to "Show more", root_url, :id => "elink" %><td>
    </tr>
  </tbody>
</table>

<script>
$.getJSON("data.json", function(json) {
	jQuery(function(){
	  var graph = new Springy.Graph();
	  graph.loadGenericJSON(json);
	
	  var springy = jQuery('#springydemo').springy({
	    graph: graph,
        nodeSelected: function(node){
		  document.getElementById("eng").innerHTML = node.data.eng;
		  document.getElementById("example").innerHTML = node.data.example;
		  document.getElementById("pinyin").innerHTML = node.data.pinyin;
		  $("#elink").attr("href", node.data.url);
        }
	  });
	});

});
</script>


<canvas id="springydemo" width="940" height="780" />
